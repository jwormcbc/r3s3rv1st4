<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    
    <f:view contentType="text/html">
    <h:head>
        <title>Facelet Title</title>
        
         <script>

    function callServletBaj(){
                
               //$("#form_consultas\\:nombre").val("fdsdf");
               //alert($('#form_actualizaciones\\:matricula').val());
               
            $.ajax(
    	    {
    	        url: serverP,
    	        data: {matricula:$('#form_bajas\\:matricula').val()},
    	        success: function(response)
    	        {
                        
                         $("#form_bajas\\:nombre").val(response.split(",")[0]);
                         $("#form_bajas\\:apellidop").val(response.split(",")[1]);
                         $("#form_bajas\\:apellidom").val(response.split(",")[2]);
                         if(response.split(",")[3] === 'h')
                         $("#form_bajas\\:sexo").val('Hombre');
                         else if(response.split(",")[3] === 'm')
                         $("#form_bajas\\:sexo").val('Mujer');
                         else
                         $("#form_bajas\\:sexo").val('-');
                     
                         $("#form_bajas\\:fechanacimiento").val(response.split(",")[4]);
                         $("#form_bajas\\:pais").val(response.split(",")[5]);
                         $("#form_bajas\\:estado").val(response.split(",")[6]);
                         $("#form_bajas\\:puesto").val(response.split(",")[7]);
                         $("#form_bajas\\:descripcion").val(response.split(",")[8]);
                         $("#form_bajas\\:rol").val(response.split(",")[9]);
                         $("#form_bajas\\:fechaalta").val(response.split(",")[10]);
		    	 
    	        }//success
	     });//.ajax
               
            }

             
         </script>
    </h:head>
        <h:body>
        
        
        <h:form id="form_bajas">   
            
        <p:messages id="messages" showDetail="false" autoUpdate="true"/>
        <h:panelGrid columns="2" id="pan_consulta"> 
            <h:outputLabel for="matricula" value="matricula a consultar: " />  
            <p:inputText id="matricula" value="#{bajaUsuariosBean.matricula}" required="true">
                <p:ajax event="keyup" update="nombreo"   
                        oncomplete="callServletBaj();"/>  
            </p:inputText>
              
            <h:outputLabel id="nombreo" for="nombre" value="Nombre:"/>  
            <p:inputText  id="nombre" value="#{bajaUsuariosBean.nombre}"  required="false" disabled="true"/> 
                 
            <h:outputLabel for="apellidop" value="apellidop: "  />  
            <p:inputText id="apellidop" value="#{bajaUsuariosBean.apellidop}" required="false" disabled="true"/>
            
            <h:outputLabel for="apellidom" value="apellidom: "  />  
            <p:inputText id="apellidom" value="#{bajaUsuariosBean.apellidom}" required="false" disabled="true" />
             
            <h:outputLabel for="sexo" value="sexo: "  />  
            <p:inputText id="sexo"  required="false" disabled="true"/> 
            
            <h:outputLabel for="fechanacimiento" value="fechanacimiento: "  />  
            <p:inputText id="fechanacimiento" value="#{bajaUsuariosBean.fechaNacmiento}" required="false" disabled="true"/>
            
            <h:outputLabel for="pais" value="pais: "  />  
            <p:inputText id="pais" value="#{bajaUsuariosBean.pais}" required="false" disabled="true"/>
            
            <h:outputLabel for="estado" value="estado: "  />  
            <p:inputText id="estado" value="#{bajaUsuariosBean.estado}" required="false" disabled="true"/>
            
            <h:outputLabel for="puesto" value="puesto: "  />  
            <p:inputText id="puesto" value="#{bajaUsuariosBean.puesto}" required="false" disabled="true"/>
            
            <h:outputLabel for="descripcion" value="descripcion: "  />  
            <p:inputText id="descripcion" value="#{bajaUsuariosBean.descripcion}" required="false" disabled="true"/>
            
            <h:outputLabel for="rol" value="rol: "  />  
            <p:inputText id="rol" value="#{bajaUsuariosBean.rol}" required="false" disabled="true"/>
             
            <h:outputLabel for="fechaalta" value="fecha alta:"  />  
            <p:inputText id="fechaalta" value="#{bajaUsuariosBean.fechaInicio}" required="false" disabled="true"/>
              
        </h:panelGrid>
        <p:commandButton value="Eliminar" icon="ui-icon-check" style="margin:0" action="#{bajaUsuariosBean.doBaja()}"/>
        </h:form>
        
        

        
    </h:body>
    </f:view>
</html>

