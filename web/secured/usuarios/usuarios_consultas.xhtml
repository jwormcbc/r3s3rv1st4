<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    
    <f:view contentType="text/html">
    <h:head>
        <title>Facelet Title</title>
        
        <script type="text/javascript">
            
            function callServlet(){
                
               //$("#form_consultas\\:nombre").val("fdsdf");
               //alert($('#form_consultas\\:nombre').val());
               
            $.ajax(
    	    {
    	        url: serverP,
    	        data: {matricula:$('#form_consultas\\:matricula').val()},
    	        success: function(response)
    	        {
                        
                         $("#form_consultas\\:nombre").val(response.split(",")[0]);
                         $("#form_consultas\\:apellidop").val(response.split(",")[1]);
                         $("#form_consultas\\:apellidom").val(response.split(",")[2]);
                         if(response.split(",")[3] === 'h')
                         $("#form_consultas\\:sexo").val('Hombre');
                         else if(response.split(",")[3] === 'm')
                         $("#form_consultas\\:sexo").val('Mujer');
                         else
                         $("#form_consultas\\:sexo").val('-');
                     
                         $("#form_consultas\\:fechanacimiento").val(response.split(",")[4]);
                         $("#form_consultas\\:pais").val(response.split(",")[5]);
                         $("#form_consultas\\:estado").val(response.split(",")[6]);
                         $("#form_consultas\\:puesto").val(response.split(",")[7]);
                         $("#form_consultas\\:descripcion").val(response.split(",")[8]);
                         $("#form_consultas\\:rol").val(response.split(",")[9]);
                         $("#form_consultas\\:fechaalta").val(response.split(",")[10]);
		    	 
    	        }//success
	     });//.ajax
               
            }
            
        </script>
        
    </h:head>
        <h:body>
        
        
        <h:form id="form_consultas">   
            
        <p:messages id="messages" showDetail="false" autoUpdate="true"/>
        <h:panelGrid columns="2" id="pan_consulta"> 
            <h:outputLabel for="matricula" value="matricula a consultar: " />  
            <p:inputMask id="matricula" value="#{consultaUsuariosBean.matricula}" required="true" mask="999999">
                <p:ajax event="keyup" update="nombreo"   
                        oncomplete="callServlet();"/>  
            </p:inputMask>
              
            <h:outputLabel id="nombreo" for="nombre" value="Nombre:"/>  
            <p:inputText  id="nombre" value="#{consultaUsuariosBean.nombre}"  required="false" disabled="true"/> 
                 
            <h:outputLabel for="apellidop" value="apellidop: "  />  
            <p:inputText id="apellidop" value="#{consultaUsuariosBean.apellidop}" required="false" disabled="true"/>
            
            <h:outputLabel for="apellidom" value="apellidom: "  />  
            <p:inputText id="apellidom" value="#{consultaUsuariosBean.apellidom}" required="false" disabled="true" />
             
            <h:outputLabel for="sexo" value="sexo: "  />  
            <p:inputText id="sexo"  required="false" disabled="true"/> 
            
            <h:outputLabel for="fechanacimiento" value="fechanacimiento: "  />  
            <p:inputText id="fechanacimiento" value="#{consultaUsuariosBean.fechaNacmiento}" required="false" disabled="true"/>
            
            <h:outputLabel for="pais" value="pais: "  />  
            <p:inputText id="pais" value="#{consultaUsuariosBean.pais}" required="false" disabled="true"/>
            
            <h:outputLabel for="estado" value="estado: "  />  
            <p:inputText id="estado" value="#{consultaUsuariosBean.estado}" required="false" disabled="true"/>
            
            <h:outputLabel for="puesto" value="puesto: "  />  
            <p:inputText id="puesto" value="#{consultaUsuariosBean.puesto}" required="false" disabled="true"/>
            
            <h:outputLabel for="descripcion" value="descripcion: "  />  
            <p:inputText id="descripcion" value="#{consultaUsuariosBean.descripcion}" required="false" disabled="true"/>
            
             <h:outputLabel for="rol" value="rol: "  />  
             <p:inputText id="rol" value="#{consultaUsuariosBean.rol}" required="false" disabled="true"/>
             
              <h:outputLabel for="fechaalta" value="fecha alta:"  />  
              <p:inputText id="fechaalta" value="#{consultaUsuariosBean.fechaInicio}" required="false" disabled="true"/>
              
        </h:panelGrid>
        </h:form>
        
        

        
    </h:body>
    </f:view>
</html>

